function AFD(JSON){var _json=JSON,_nos=null,_alfabeto=null,_init=function(){_nos=eval(_json).sort(function(o,t){return o.o<t.o?-1:o.o>t.o?1:0}).map(function(o){var t=(o.t?o.t:[]).map(function(o){return new AFD.Transicao(o.s,o.d)});return new AFD.No(o.o,o.r,o.f,t)}),_alfabeto=[];for(var i=0;i<_nos.length;++i)for(var transicoes=_nos[i].getTransicoes(),j=0;j<transicoes.length;++j)for(var simbolosDaTransicao=transicoes[j].getSimbolos(),k=0;k<simbolosDaTransicao.length;++k)_alfabeto.some(function(o){return o.toString()==simbolosDaTransicao[k].toString()})||_alfabeto.push(simbolosDaTransicao[k])};this.getNos=function(){return _nos},this.getAlfabeto=function(){return _alfabeto};var isPalavraValida=function(o){for(var t=0;t<o.length;++t)if(!_alfabeto.some(function(n){return n.toString()==o[t].toString()}))return{resultado:AFD.MotivosRejeicao.NAO_FAZ_PARTE_DO_ALFABETO,simbolo:o[t]};return!0};this.getNomeNo=function(o){return o.toString()},this.testarPalavra=function(o){if(!o||o.length<=0)return AFD.MotivosRejeicao.ACEITO;var t=isPalavraValida(o);if(t!==!0)return t;for(var n=_nos[0],r=[],e=0;e<o.length;++e){var i=null;r.push(o[e]);var a=n.getTransicoes(),s=a.length;if(s>0)for(var l=0;s>l;++l){var u=a[l],g=u.getSimbolos();g.some(function(t){return t.toString()==o[e].toString()})&&(i=_nos[parseInt(u.getDestino())])}if(null==i)return{resultado:AFD.MotivosRejeicao.TRANSICAO_INEXISTENTE,no:n,processados:r,simbolo:o[e]};n=i}return null!=i&&i.getFinal()?AFD.MotivosRejeicao.ACEITO:{resultado:AFD.MotivosRejeicao.ESTADO_NAO_FINAL,proximo:i}},_init()}AFD=AFD||{},AFD.MotivosRejeicao={ACEITO:0,NAO_FAZ_PARTE_DO_ALFABETO:1,TRANSICAO_INEXISTENTE:2,ESTADO_NAO_FINAL:3},AFD=AFD||{},AFD.No=function(o,t,n,r){var e=o,i=t,a=n,s=r;this.getFinal=function(){return a},this.getRotulo=function(){return i},this.getTransicoes=function(){return s},this.toString=function(){return i?i.toString():"q"+e.toString()}},AFD=AFD||{},AFD.Renderer=AFD.Renderer||{},AFD.Renderer.Default=function(o,t,n){var r=o,e=t,i="#CCC",a="#F00",s="#000",l="#000",u=null,g=n||{maxEdgeSize:1,minArrowSize:10,maxNodeSize:10,labelThreshold:0,labelSize:"proportional",labelSizeRatio:1.5,defaultLabelColor:l,labelAlignment:"inside"},c=function(){u=new sigma({renderer:{container:e,type:"canvas"},settings:g}),u.graph.addNode({id:"n-",x:.3,y:0,size:0,color:"#FFF"})};this.render=function(){for(var o=1,t=r.getNos(),n=r.getNos().length,e=Math.round(Math.sqrt(n)),l=Math.round(Math.pow(2,e-1)),g=0;n>g;++g){var c=Math.round(Math.sqrt(g)),f=Math.round(Math.pow(2,c-1)),A=g-c,d=r.getNos()[g],h=d.getFinal()?a:i,D=d.getRotulo();u.graph.addNode({id:"n"+g.toString(),label:D,x:l/(f+1)+A/2,y:c,size:1,color:h}),o+=.4}u.graph.addEdge({id:"en-",source:"n-",target:"n0",color:"#CCC",type:"arrow",count:0});for(var g=0;n>g;++g){var d=t[g],F=d.getTransicoes(),v=F.length;if(v>0)for(j=0;j<v;++j){var S=F[j],_=g==S.getDestino()||S.getDestino()<g?"curvedArrow":"arrow";u.graph.addEdge({id:"en"+g.toString()+"n"+S.getDestino().toString(),source:"n"+g.toString(),target:"n"+S.getDestino().toString(),label:"{"+S.getSimbolos().join(",")+"}",color:s,type:_,count:j})}}u.refresh()},c()},AFD=AFD||{},AFD.Transicao=function(o,t){var n=o,r=t;this.getSimbolos=function(){return n},this.getDestino=function(){return r}};