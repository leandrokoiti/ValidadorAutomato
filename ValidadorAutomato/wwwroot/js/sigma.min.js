(function(e){"use strict";var t={};window.addEventListener("resize",function(){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];i.refresh()}});var i=function(e){var s,r,a,o,n;i.classes.dispatcher.extend(this);var l=e||{};if("string"==typeof l||l instanceof HTMLElement?l={renderers:[l]}:"[object Array]"===Object.prototype.toString.call(l)&&(l={renderers:l}),o=l.renderers||l.renderer||l.container,l.renderers&&0!==l.renderers.length||("string"==typeof o||o instanceof HTMLElement||"object"==typeof o&&"container"in o)&&(l.renderers=[o]),l.id){if(t[l.id])throw'sigma: Instance "'+l.id+'" already exists.';Object.defineProperty(this,"id",{value:l.id})}else{for(n=0;t[n];)n++;Object.defineProperty(this,"id",{value:""+n})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,l.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","hovers","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),a=l.renderers||[],s=0,r=a.length;r>s;s++)this.addRenderer(a[s]);for(a=l.middlewares||[],s=0,r=a.length;r>s;s++)this.middlewares.push("string"==typeof a[s]?i.middlewares[a[s]]:a[s]);"object"==typeof l.graph&&l.graph&&(this.graph.read(l.graph),this.refresh())};if(i.prototype.addCamera=function(t){var s,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return s=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=s,s.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(s.edgequadtree=new i.classes.edgequad),s.bind("coordinatesUpdated",function(e){r.dispatchEvent("coordinatesUpdated"),r.renderCamera(s)}),this.renderersPerCamera[t]=[],s},i.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,i,s=this.renderersPerCamera[e.id];for(i=s.length,t=i-1;t>=0;t--)this.killRenderer(s[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,s,r,a,o=e||{};if("string"==typeof o?o={container:document.getElementById(o)}:o instanceof HTMLElement&&(o={container:o}),"string"==typeof o.container&&(o.container=document.getElementById(o.container)),"id"in o)t=o.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(s="function"==typeof o.type?o.type:i.renderers[o.type],s=s||i.renderers.def,r="camera"in o?o.camera instanceof i.classes.camera?o.camera:this.cameras[o.camera]||this.addCamera(o.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return a=new s(this.graph,r,this.settings,o),this.renderers[t]=a,Object.defineProperty(a,"id",{value:t}),a.bind&&a.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","hovers","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(a),a},i.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var s,r,a,o,n,l,d=0;for(t=t||{},o=this.middlewares||[],s=0,r=o.length;r>s;s++)o[s].call(this,0===s?"":"tmp"+d+":",s===r-1?"ready:":"tmp"+ ++d+":");for(a in this.cameras)n=this.cameras[a],n.settings("autoRescale")&&this.renderersPerCamera[n.id]&&this.renderersPerCamera[n.id].length?i.middlewares.rescale.call(this,o.length?"ready:":"",n.readPrefix,{width:this.renderersPerCamera[n.id][0].width,height:this.renderersPerCamera[n.id][0].height}):i.middlewares.copy.call(this,o.length?"ready:":"",n.readPrefix),t.skipIndexation||(l=i.utils.getBoundaries(this.graph,n.readPrefix),n.quadtree.index(this.graph,{prefix:n.readPrefix,maxLevel:n.settings("nodeQuadtreeMaxLevel"),bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),n.edgequadtree!==e&&n.settings("drawEdges")&&(n.settings("enableEdgeHovering")||n.settings("edgesClippingWithNodes"))&&n.edgequadtree.index(this.graph,{prefix:n.readPrefix,maxLevel:n.settings("edgeQuadtreeMaxLevel"),bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(o=Object.keys(this.renderers),s=0,r=o.length;r>s;s++)if(this.renderers[o[s]].process)if(this.settings("skipErrors"))try{this.renderers[o[s]].process()}catch(g){console.log('Warning: The renderer "'+o[s]+'" crashed on ".process()"')}else this.renderers[o[s]].process();return this.render(),this},i.prototype.render=function(){var e;for(e in this.renderers)if(this.settings("skipErrors"))try{this.renderers[e].render()}catch(t){this.settings("verbose")&&console.log('Warning: The renderer "'+this.renderers[e]+'" crashed on ".render()"')}else this.renderers[e].render();return this},i.prototype.renderCamera=function(e,t){var i,s,r,a=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,s=r.length;s>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete a.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.5.0",i.forceES5=!1,"undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this),function(e){"use strict";function t(e,i){var s,r,a,o;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(o=Array.isArray(e)?e:e.split(/ /),s=0,r=o.length;s!==r;s+=1)a=o[s],_[a]||(_[a]=[]),_[a].push({handler:i})}function i(e,t){var i,s,r,a,o,n,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,s=l.length;i!==s;i+=1){if(n=l[i],_[n]){for(o=[],r=0,a=_[n].length;r!==a;r+=1)_[n][r].handler!==t&&o.push(_[n][r]);_[n]=o}_[n]&&0===_[n].length&&delete _[n]}else for(i=0,s=l.length;i!==s;i+=1)delete _[l[i]];else _=Object.create(null)}function s(e,t){var i,s,r,a,o,n,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(n=l[i],_[n])for(o={type:n,data:t||{}},s=0,a=_[n].length;s!==a;s+=1)try{_[n][s].handler(o)}catch(d){}}function r(){var e,t,i,s,r=!1,a=x(),o=A.shift();if(i=o.job(),a=x()-a,o.done++,o.time+=a,o.currentTime+=a,o.weightTime=o.currentTime/(o.weight||1),o.averageTime=o.time/o.done,s=o.count?o.count<=o.done:!i,!s){for(e=0,t=A.length;t>e;e++)if(A[e].weightTime>o.weightTime){A.splice(e,0,o),r=!0;break}r||A.push(o)}return s?o:null}function a(e){var t=A.length;w[e.id]=e,e.status="running",t&&(e.weightTime=A[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=x(),s("jobStarted",p(e)),A.push(e)}function o(){var e,t,i;for(e in E)t=E[e],t.after?T[e]=t:a(t),delete E[e];for(b=!!A.length;A.length&&x()-v<P.frameDuration;)if(i=r()){l(i.id);for(e in T)T[e].after===i.id&&(a(T[e]),delete T[e])}b?(v=x(),s("enterFrame"),setTimeout(o,0)):s("stop")}function n(e,t){var i,r,a;if(Array.isArray(e)){for(C=!0,i=0,r=e.length;r>i;i++)n(e[i].id,f(e[i],t));C=!1,b||(v=x(),s("start"),o())}else if("object"==typeof e)if("string"==typeof e.id)n(e.id,e);else{C=!0;for(i in e)"function"==typeof e[i]?n(i,f({job:e[i]},t)):n(i,f(e[i],t));C=!1,b||(v=x(),s("start"),o())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(g(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)a={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");a=f({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}E[e]=a,s("jobAdded",p(a)),b||C||(v=x(),s("start"),o())}return this}function l(e){var t,i,r,a,o=!1;if(Array.isArray(e))for(t=0,i=e.length;i>t;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[w,T,E],t=0,i=r.length;i>t;t++)e in r[t]&&(a=r[t][e],P.history&&(a.status="done",S.push(a)),s("jobEnded",p(a)),delete r[t][e],"function"==typeof a.end&&a.end(),o=!0);for(r=A,t=0,i=r.length;i>t;t++)if(r[t].id===e){r.splice(t,1);break}if(!o)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function d(){var e,t=f(E,w,T);if(P.history)for(e in t)t[e].status="done",S.push(t[e]),"function"==typeof t[e].end&&t[e].end();return E={},T={},w={},A=[],b=!1,this}function g(e){var t=E[e]||w[e]||T[e];return t?f(t):null}function h(e,t){var i;if("string"==typeof a1&&1===arguments.length)return P[a1];i="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(i[a1]=a2);for(var s in i)void 0!==i[s]?P[s]=i[s]:delete P[s];return this}function c(){return b}function u(){return S=[],this}function m(e,t){var i,s,r,a,o,n,l;if(!arguments.length){o=[];for(s in E)o.push(E[s]);for(s in T)o.push(T[s]);for(s in w)o.push(w[s]);o=o.concat(S)}if("string"==typeof e)switch(e){case"waiting":o=y(T);break;case"running":o=y(w);break;case"done":o=S;break;default:n=e}if(e instanceof RegExp&&(n=e),!n&&("string"==typeof t||t instanceof RegExp)&&(n=t),n){if(l="string"==typeof n,o instanceof Array)i=o;else if("object"==typeof o){i=[];for(s in o)i=i.concat(o[s])}else{i=[];for(s in E)i.push(E[s]);for(s in T)i.push(T[s]);for(s in w)i.push(w[s]);i=i.concat(S)}for(o=[],r=0,a=i.length;a>r;r++)(l?i[r].id===n:i[r].id.match(n))&&o.push(i[r])}return p(o)}function f(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function p(e){var t,i,s;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,s=e.length;s>i;i++)t.push(p(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=p(e[i])}else t=e;return t}function y(e){var t,i=[];for(t in e)i.push(e[t]);return i}function x(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var v,b=!1,E={},w={},A=[],T={},S=[],C=!1,P={frameDuration:20,history:!0},_=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var k={hasJob:g,addJob:n,killJob:l,killAll:d,settings:h,getStats:m,isRunning:c,clearHistory:u,bind:t,unbind:i,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports.conrad=k),e.conrad=k}(this),function(e){"use strict";function t(){var t,i=this;sigma.forceES5||"undefined"==typeof Map||Map.prototype.keys===e||Map.prototype.forEach===e||Array.from===e?(t=Object.create(null),this.size=0,this.keyList=function(){return Object.keys(t).filter(function(i){return t[i]!==e})},this.valueList=function(){for(var i=Object.keys(t),s=[],r=0;r<i.length;r++){var a=t[i[r]];a!==e&&s.push(a)}return s},this.set=function(s,r){t[s]===e&&i.size++,t[s]=r},this.get=function(e){return t[e]},this.has=function(i){return t[i]!==e},this.forEach=function(e){for(var i=Object.keys(t),s=0;s<i.length;++s){var r=i[s],a=t[r];"undefined"!=typeof a&&e(a,r)}},this["delete"]=function(s){var r=t[s];return t[s]=e,r!==e&&i.size--,r},this.clear=function(){for(var e in t)"hasOwnProperty"in t&&!t.hasOwnProperty(e)||delete t[e];t=Object.create(null),i.size=0}):(t=new Map,Object.defineProperty(this,"size",{get:function(){return t.size},set:e,enumerable:!0}),this.set=function(e,i){t.set(""+e,i)},this.get=function(e){return t.get(""+e)},this.has=function(e){return t.has(""+e)},this.forEach=function(e){return t.forEach(e)},this["delete"]=function(e){return t["delete"](""+e)},this.clear=function(){t.clear()},this.keyList=function(){return Array.from(t.keys())},this.valueList=function(){var e=[];return t.forEach(function(t){e.push(t)}),e})}if("undefined"==typeof sigma)throw"sigma is not declared";var i=this;sigma.utils=sigma.utils||{},sigma.utils.map=t,sigma.utils.extend=function(){var e,t,i={},s=arguments.length;for(e=s-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},i)},sigma.utils.id=function(){var e=0;return function(){return++e}}();var s={};sigma.utils.floatColor=function(e){if(s[e])return s[e];var t=e,i=0,r=0,a=0;"#"===e[0]?(e=e.slice(1),3===e.length?(i=parseInt(e.charAt(0)+e.charAt(0),16),r=parseInt(e.charAt(1)+e.charAt(1),16),a=parseInt(e.charAt(2)+e.charAt(2),16)):(i=parseInt(e.charAt(0)+e.charAt(1),16),r=parseInt(e.charAt(2)+e.charAt(3),16),a=parseInt(e.charAt(4)+e.charAt(5),16))):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),i=+e[1],r=+e[2],a=+e[3]);var o=256*i*256+256*r+a;return s[t]=o,o},sigma.utils.zoomTo=function(e,t,i,s,r){var a,o,n,l=e.settings;o=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*s)),o!==e.ratio&&(s=o/e.ratio,n={x:t*(1-s)+e.x,y:i*(1-s)+e.y,ratio:o},r&&r.duration?(a=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:a?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,n,r)):(e.goTo(n),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,s,r){return r=this.extend(r,{x:2,y:4}),{x:(e+i)/r.x+(s-t)/r.y,y:(t+s)/r.x+(e-i)/r.y}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,s,r,a,o){return{x:(1-e)*(1-e)*t+2*(1-e)*e*a+e*e*s,y:(1-e)*(1-e)*i+2*(1-e)*e*o+e*e*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,s,r,a,o,n,l){var d=(1-e)*(1-e)*(1-e),g=3*e*(1-e)*(1-e),h=3*e*e*(1-e),c=e*e*e;return{x:d*t+g*a+h*n+c*s,y:d*i+g*o+h*l+c*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,s){return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t))},sigma.utils.getCircleIntersection=function(e,t,i,s,r,a){var o,n,l,d,g,h,c,u,m;if(n=s-e,l=r-t,d=Math.sqrt(l*l+n*n),d>i+a)return!1;if(d<Math.abs(i-a))return!1;o=(i*i-a*a+d*d)/(2*d),u=e+n*o/d,m=t+l*o/d,g=Math.sqrt(i*i-o*o),h=-l*(g/d),c=n*(g/d);var f=u+h,p=u-h,y=m+c,x=m-c;return{xi:f,xi_prime:p,yi:y,yi_prime:x}},sigma.utils.isPointOnSegment=function(e,t,i,s,r,a,o){return sigma.utils.distancePointToSegment(e,t,i,s,r,a)<o},sigma.utils.distancePointToSegment=function(e,t,i,s,r,a){var o,n,l=e-i,d=t-s,g=r-i,h=a-s,c=l*g+d*h,u=g*g+h*h,m=-1;0!==u&&(m=c/u),0>m?(o=i,n=s):m>1?(o=r,n=a):(o=i+m*g,n=s+m*h);var f=e-o,p=t-n;return Math.sqrt(f*f+p*p)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,s,r,a,o,n,l){var d=sigma.utils.getDistance(i,s,r,a);if(Math.abs(e-i)>d||Math.abs(t-s)>d)return!1;for(var g,h=sigma.utils.getDistance(e,t,i,s),c=sigma.utils.getDistance(e,t,r,a),u=.5,m=c>h?-.01:.01,f=.001,p=100,y=sigma.utils.getPointOnQuadraticCurve(u,i,s,r,a,o,n),x=sigma.utils.getDistance(e,t,y.x,y.y);p-->0&&u>=0&&1>=u&&x>l&&(m>f||-f>m);)g=x,y=sigma.utils.getPointOnQuadraticCurve(u,i,s,r,a,o,n),x=sigma.utils.getDistance(e,t,y.x,y.y),x>g?(m=-m/2,u+=m):0>u+m||u+m>1?(m/=2,x=g):u+=m;return l>x},sigma.utils.isPointOnBezierCurve=function(e,t,i,s,r,a,o,n,l,d,g){var h=sigma.utils.getDistance(i,s,o,n);if(Math.abs(e-i)>h||Math.abs(t-s)>h)return!1;for(var c,u=sigma.utils.getDistance(e,t,i,s),m=sigma.utils.getDistance(e,t,r,a),f=.5,p=m>u?-.01:.01,y=.001,x=100,v=sigma.utils.getPointOnBezierCurve(f,i,s,r,a,o,n,l,d),b=sigma.utils.getDistance(e,t,v.x,v.y);x-->0&&f>=0&&1>=f&&b>g&&(p>y||-y>p);)c=b,v=sigma.utils.getPointOnBezierCurve(f,i,s,r,a,o,n,l,d),b=sigma.utils.getDistance(e,t,v.x,v.y),b>c?(p=-p/2,f+=p):0>f+p||f+p>1?(p/=2,b=c):f+=p;return g>b},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getPixelRatio=function(){var t=1;return window.screen.deviceXDPI!==e&&window.screen.logicalXDPI!==e&&window.screen.deviceXDPI>window.screen.logicalXDPI?t=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==e&&(t=window.devicePixelRatio),t},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,i){return t=t||sigma.utils.getX(e),i=i||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:i-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var s,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],s=e._doubleClickHandler[t],s.push(function(e){return r++,2===r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,s[s.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,s=(e._doubleClickHandler||{})[t]||[];i=s.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.isWebGLSupported=function(){var e,t=!!window.WebGLRenderingContext;if(t){e=document.createElement("canvas");try{return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(i){}}return!1},sigma.utils.loadShader=function(e,t,i,s){var r,a=e.createShader(i);return e.shaderSource(a,t),e.compileShader(a),r=e.getShaderParameter(a,e.COMPILE_STATUS),r?a:(s&&s('Error compiling shader "'+a+'":'+e.getShaderInfoLog(a)),e.deleteShader(a),null)},sigma.utils.loadProgram=function(e,t,i,s,r){var a,o,n=e.createProgram();for(a=0;a<t.length;++a)e.attachShader(n,t[a]);if(i)for(a=0;a<i.length;++a)e.bindAttribLocation(n,locations?locations[a]:a,opt_attribs[a]);return e.linkProgram(n),o=e.getProgramParameter(n,e.LINK_STATUS),o?n:(r&&r("Error in program linking: "+e.getProgramInfoLog(n)),e.deleteProgram(n),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),s=Math.sin(e);return t?[i,-s,s,i]:[i,-s,0,s,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var s=i?2:3,r=e[0*s+0],a=e[0*s+1],o=e[0*s+2],n=e[1*s+0],l=e[1*s+1],d=e[1*s+2],g=e[2*s+0],h=e[2*s+1],c=e[2*s+2],u=t[0*s+0],m=t[0*s+1],f=t[0*s+2],p=t[1*s+0],y=t[1*s+1],x=t[1*s+2],v=t[2*s+0],b=t[2*s+1],E=t[2*s+2];return i?[r*u+a*p,r*m+a*y,n*u+l*p,n*m+l*y]:[r*u+a*p+o*v,r*m+a*y+o*b,r*f+a*x+o*E,n*u+l*p+d*v,n*m+l*y+d*b,n*f+l*x+d*E,g*u+h*p+c*v,g*m+h*y+c*b,g*f+h*x+c*E]},sigma.utils.canvas={},sigma.utils.canvas.getTextWidth=function(e,t,i,s){return s?t?.6*s.length*i:e.measureText(s).width:0},sigma.utils.canvas.setLevel=function(e,t){if(e)switch(t.shadowOffsetX=0,e){case 1:t.shadowOffsetY=1.5,t.shadowBlur=4,t.shadowColor="rgba(0,0,0,0.36)";break;case 2:t.shadowOffsetY=3,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.39)";break;case 3:t.shadowOffsetY=6,t.shadowBlur=12,t.shadowColor="rgba(0,0,0,0.42)";break;case 4:t.shadowOffsetY=10,t.shadowBlur=20,t.shadowColor="rgba(0,0,0,0.47)";break;case 5:t.shadowOffsetY=15,t.shadowBlur=24,t.shadowColor="rgba(0,0,0,0.52)"}},sigma.utils.canvas.resetLevel=function(e){e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="#000000"};var r={};sigma.utils.canvas.drawImage=function(e,t,i,s,a,o,n,l){if(e.image&&e.image.url&&!(n>s)){var d=e.image.url,g=e.image.h||1,h=e.image.w||1,c=e.image.scale||1,u=e.image.clip||1,m=r[d];m||(m=document.createElement("IMG"),m.setAttribute("crossOrigin",o),m.src=d,m.onload=function(){window.dispatchEvent(new Event("resize"))},r[d]=m);var f=g>h?h/g:1,p=h>g?g/h:1,y=s*c;a.save(),a.beginPath(),"function"==typeof l?l(e,t,i,s,a,u):a.arc(t,i,s*u,0,2*Math.PI,!0),a.closePath(),a.clip(),a.drawImage(m,t+Math.sin(-.7855)*y*f,i-Math.cos(-.7855)*y*p,y*f*2*Math.sin(-.7855)*-1,y*p*2*Math.cos(-.7855)),a.restore()}},sigma.utils.canvas.drawIcon=function(e,t,i,s,r,a){if(e.icon&&!(a>s)){var o=e.icon.font||"Arial",n=e.icon.color||"#F00",l=e.icon.content||"?",d=(e.icon.x||.5,e.icon.y||.5,s),g=.7;"number"==typeof e.icon.scale&&(g=Math.abs(Math.max(.01,e.icon.scale)));var h=Math.round(g*d);r.save(),r.fillStyle=n,r.font=""+h+"px "+o,r.textAlign="center",r.textBaseline="middle",r.fillText(l,t,i),r.restore()}}}.call(this),function(e){"use strict";var t,i=0,s=["ms","moz","webkit","o"];for(t=0;t<s.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[s[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[s[t]+"CancelAnimationFrame"]||e[s[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,s){var r=(new Date).getTime(),a=Math.max(0,16-(r-i)),o=e.setTimeout(function(){t(r+a)},a);return i=r+a,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,s=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,s.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={clone:!1,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,labelAlignment:"right",edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,maxNodeLabelLineLength:0,webglOversamplingRatio:2,nodeBorderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,approximateLabelWidth:!0,edgesClippingWithNodes:!0,autoCurveRatio:1,autoCurveSortByDirection:!0,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,zoomOnLocation:!0,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodeQuadtreeMaxLevel:4,edgeQuadtreeMaxLevel:4,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,s,r,a;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(a="string"==typeof e?e.split(" "):e,i=0,s=a.length;i!==s;i+=1)r=a[i],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,s,r,a,o,n,l,d="string"==typeof e?e.split(" "):e;if(!arguments.length){for(o in this._handlers)delete this._handlers[o];return this}if(t)for(i=0,s=d.length;i!==s;i+=1){if(l=d[i],this._handlers[l]){for(n=[],r=0,a=this._handlers[l].length;r!==a;r+=1)this._handlers[l][r].handler!==t&&n.push(this._handlers[l][r]);this._handlers[l]=n}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,s=d.length;i!==s;i+=1)delete this._handlers[d[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,s,r,a,o,n,l,d=this,g="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,s=g.length;i!==s;i+=1)if(l=g[i],this._handlers[l]){for(n=d.getEvent(l,t),o=[],r=0,a=this._handlers[l].length;r!==a;r+=1)this._handlers[l][r].handler(n),this._handlers[l][r].one||o.push(this._handlers[l][r]);this._handlers[l]=o}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var s;for(s in e.prototype)e.prototype.hasOwnProperty(s)&&(t[s]=e.prototype[s]);e.apply(t,i)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,s={},r=Array.prototype.slice.call(arguments,0),a=function(e,t){var i,o,n,l;if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:a(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),o=0,l=Object.keys(i),n=l.length;n>o;o++)s[l[o]]=i[l[o]];return this}if(void 0!==s[e])return s[e];for(o=0,n=r.length;n>o;o++)if(void 0!==r[o][e])return r[o][e]};for(a.embedObjects=function(){var t=r.concat(s).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;i>t;t++)a(arguments[t]);return a};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function t(e,t,i){var s=function(){var s,r;for(s in o[e])o[e][s].apply(t,arguments);r=i.apply(t,arguments);for(s in a[e])a[e][s].apply(t,arguments);return r};return s}var i=Object.create(null),s=Object.create(null),r=Object.create(null),a=Object.create(null),o=Object.create(null),n={immutable:!0,clone:!0},l=function(e){return n[e]},d=function(e){var s,a,o;o={settings:e||l,nodesArray:[],edgesArray:[],nodesIndex:new sigma.utils.map,edgesIndex:new sigma.utils.map,inNeighborsIndex:new sigma.utils.map,outNeighborsIndex:new sigma.utils.map,allNeighborsIndex:new sigma.utils.map};for(s in r)r[s].call(o);for(s in i)a=t(s,o,i[s]),this[s]=a,o[s]=a};d.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(i[e]||d[e])throw'The method "'+e+'" already exists.';return i[e]=t,a[e]=Object.create(null),o[e]=Object.create(null),this},d.hasMethod=function(e){return!(!i[e]&&!d[e])},d.attach=function(e,t,i,s){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var n;if("constructor"===e)n=r;else if(s){if(!o[e])throw'The method "'+e+'" does not exist.';n=o[e]}else{if(!a[e])throw'The method "'+e+'" does not exist.';n=a[e]}if(n[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return n[t]=i,this},d.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},d.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(s[e])throw'The index "'+e+'" already exists.';var i;s[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";d.attach(i,e,t[i])}return this},d.addMethod("addNode",function(t){if(Object(t)!==t||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof t.id&&"number"!=typeof t.id)throw"The node must have a string or number id.";if(this.nodesIndex.get(t.id))throw'The node "'+t.id+'" already exists.';var i,s=t.id,r=Object.create(null);if(this.settings("clone"))for(i in t)"id"!==i&&(r[i]=t[i]);else r=t;return r.x!==e&&"number"!=typeof r.x&&(r.x=parseFloat(r.x)),r.y!==e&&"number"!=typeof r.y&&(r.y=parseFloat(r.y)),r.size!==e&&"number"!=typeof r.size&&(r.size=parseFloat(r.size)),(!r.size||r.size<=0)&&(r.size=1),this.settings("immutable")?Object.defineProperty(r,"id",{value:s,enumerable:!0}):r.id=s,this.inNeighborsIndex.set(s,new sigma.utils.map),this.outNeighborsIndex.set(s,new sigma.utils.map),this.allNeighborsIndex.set(s,new sigma.utils.map),this.nodesArray.push(r),this.nodesIndex.set(r.id,r),this}),d.addMethod("addEdge",function(t){if(Object(t)!==t||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof t.id&&"number"!=typeof t.id)throw"The edge must have a string or number id.";if("string"!=typeof t.source&&"number"!=typeof t.source||!this.nodesIndex.get(t.source))throw"The edge source must have an existing node id.";if("string"!=typeof t.target&&"number"!=typeof t.target||!this.nodesIndex.get(t.target))throw"The edge target must have an existing node id.";if(this.edgesIndex.get(t.id))throw'The edge "'+t.id+'" already exists.';var i,s=Object.create(null);if(this.settings("clone"))for(i in t)"id"!==i&&"source"!==i&&"target"!==i&&(s[i]=t[i]);
else s=t;return s.size!==e&&"number"!=typeof s.size&&(s.size=parseFloat(s.size)),(!s.size||s.size<=0)&&(s.size=1),this.settings("immutable")?(Object.defineProperty(s,"id",{value:t.id,enumerable:!0}),Object.defineProperty(s,"source",{value:t.source,enumerable:!0}),Object.defineProperty(s,"target",{value:t.target,enumerable:!0})):(s.id=t.id,s.source=t.source,s.target=t.target),this.edgesArray.push(s),this.edgesIndex.set(s.id,s),this.inNeighborsIndex.get(s.target).get(s.source)||this.inNeighborsIndex.get(s.target).set(s.source,new sigma.utils.map),this.inNeighborsIndex.get(s.target).get(s.source).set(s.id,s),this.outNeighborsIndex.get(s.source).get(s.target)||this.outNeighborsIndex.get(s.source).set(s.target,new sigma.utils.map),this.outNeighborsIndex.get(s.source).get(s.target).set(s.id,s),this.allNeighborsIndex.get(s.source).get(s.target)||this.allNeighborsIndex.get(s.source).set(s.target,new sigma.utils.map),this.allNeighborsIndex.get(s.source).get(s.target).set(s.id,s),s.target!==s.source&&(this.allNeighborsIndex.get(s.target).get(s.source)||this.allNeighborsIndex.get(s.target).set(s.source,new sigma.utils.map),this.allNeighborsIndex.get(s.target).get(s.source).set(s.id,s)),this}),d.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex.get(e))throw'The node "'+e+'" does not exist.';var t,i;for(this.nodesIndex["delete"](e),t=0,i=this.nodesArray.length;i>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);this.inNeighborsIndex["delete"](e),this.outNeighborsIndex["delete"](e),this.allNeighborsIndex["delete"](e);var s=this;return this.nodesIndex.forEach(function(t,i){s.inNeighborsIndex.get(i)["delete"](e),s.outNeighborsIndex.get(i)["delete"](e),s.allNeighborsIndex.get(i)["delete"](e)}),this}),d.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex.get(e))throw'The edge "'+e+'" does not exist.';var t,i,s;for(s=this.edgesIndex.get(e),this.edgesIndex["delete"](e),t=0,i=this.edgesArray.length;i>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return this.inNeighborsIndex.get(s.target).get(s.source)["delete"](s.id),0==this.inNeighborsIndex.get(s.target).get(s.source).size&&this.inNeighborsIndex.get(s.target)["delete"](s.source),this.outNeighborsIndex.get(s.source).get(s.target)["delete"](s.id),0==this.outNeighborsIndex.get(s.source).get(s.target).size&&this.outNeighborsIndex.get(s.source)["delete"](s.target),this.allNeighborsIndex.get(s.source).get(s.target)["delete"](s.id),0==this.allNeighborsIndex.get(s.source).get(s.target).size&&this.allNeighborsIndex.get(s.source)["delete"](s.target),s.target!==s.source&&(this.allNeighborsIndex.get(s.target).get(s.source)["delete"](s.id),0==this.allNeighborsIndex.get(s.target).get(s.source).size&&this.allNeighborsIndex.get(s.target)["delete"](s.source)),this}),d.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex}),d.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,this.nodesIndex.clear(),this.edgesIndex.clear(),this.nodesIndex.clear(),this.inNeighborsIndex.clear(),this.outNeighborsIndex.clear(),this.allNeighborsIndex.clear(),this}),d.addMethod("read",function(e){var t,i,s;for(i=e.nodes||[],t=0,s=i.length;s>t;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,s=i.length;s>t;t++)this.addEdge(i[t]);return this}),d.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex.get(e);if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";s.push(this.nodesIndex.get(e[t]))}return s}throw"nodes: Wrong arguments."}),d.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsIndex,out:this.outNeighborsIndex}[t||""]||this.allNeighborsIndex,"string"==typeof e||"number"==typeof e)return t.get(e).size;if("[object Array]"===Object.prototype.toString.call(e)){var i,s,r=[];for(i=0,s=e.length;s>i;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t.get(e[i]).size)}return r}throw"degree: Wrong arguments."}),d.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex.get(e);if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,s=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";s.push(this.edgesIndex.get(e[t]))}return s}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=d):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.graph=d):this.graph=d}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,s){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof s&&s?i.embedObject(s):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,s,r=t||{},a="ratio"in t&&!this.settings("zoomOnLocation")?["ratio","angle"]:["x","y","ratio","angle"];for(i=0,s=a.length;s>i;i++)if(r[a[i]]!==e){if("number"!=typeof r[a[i]]||isNaN(r[a[i]]))throw'Value for "'+a[i]+'" is not a number.';this[a[i]]=r[a[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,s){s=s||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,a,o,n=s.nodes||this.graph.nodes(),l=s.edges||this.graph.edges(),d=Math.cos(this.angle)/this.ratio,g=Math.sin(this.angle)/this.ratio,h=Math.pow(this.ratio,this.settings("nodesPowRatio")),c=Math.pow(this.ratio,this.settings("edgesPowRatio")),u=(s.width||0)/2-this.x*d-this.y*g,m=(s.height||0)/2-this.y*d+this.x*g;for(r=0,a=n.length;a>r;r++)o=n[r],o[i+"x"]=(o[t+"x"]||0)*d+(o[t+"y"]||0)*g+u,o[i+"y"]=(o[t+"y"]||0)*d-(o[t+"x"]||0)*g+m,o[i+"size"]=(o[t+"size"]||0)/h;for(r=0,a=l.length;a>r;r++)l[r][i+"size"]=(l[r][t+"size"]||0)/c;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var s=0,r=0,a=Math.cos(this.angle),o=Math.sin(this.angle);return i||(s=-(this.x*a+this.y*o)/this.ratio,r=-(this.y*a-this.x*o)/this.ratio),{x:(e*a+t*o)/this.ratio+s,y:(t*a-e*o)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var s=0,r=0,a=Math.cos(this.angle),o=Math.sin(this.angle);return i||(s=-(this.x*a+this.y*o)/this.ratio,r=-(this.y*a-this.x*o)/this.ratio),{x:((e-s)*a-(t-r)*o)*this.ratio,y:((t-r)*a+(e-s)*o)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y),s=sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e));return s},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),s=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),a=this.cameraPosition(e/4,0,!0).x,o=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-a,y1:this.y-r.y-o,x2:this.x-r.x+a+i.x,y2:this.y-r.y-o+i.y,height:Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y+2*o,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,s=t.y+t.height/2,r=e.y<s,a=e.x<i;return r?a?0:1:a?2:3}function i(e,t){for(var i=[],s=0;4>s;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function s(e,t){for(var i=[],s=0;4>s;s++)d.collision(e,t[s])&&i.push(s);return i}function r(e,t){var i,s,r=t.level+1,a=Math.round(t.bounds.width/2),o=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=n,s=d;break;case 1:i=n+a,s=d;break;case 2:i=n,s=d+o;break;case 3:i=n+a,s=d+o}return l({x:i,y:s,width:a,height:o},r,t.maxElements,t.maxLevel)}function a(t,s,o){if(o.level<o.maxLevel)for(var n=i(s,o.corners),l=0,d=n.length;d>l;l++)o.nodes[n[l]]===e&&(o.nodes[n[l]]=r(n[l],o)),a(t,s,o.nodes[n[l]]);else o.elements.push(t)}function o(i,s){if(s.level<s.maxLevel){var r=t(i,s.bounds);return s.nodes[r]!==e?o(i,s.nodes[r]):[]}return s.elements}function n(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var a=s(t,i.corners),o=0,l=a.length;l>o;o++)i.nodes[a[o]]!==e&&n(t,i.nodes[a[o]],s,r);else for(var d=0,g=i.elements.length;g>d;d++)r[i.elements[d].id]===e&&(r[i.elements[d].id]=i.elements[d]);return r}function l(e,t,i,s){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||20,maxLevel:s||4,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),s=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),a=Math.min(e.y1,e.y2,i.y),o=Math.max(e.y1,e.y2,i.y);return{x1:s-e.size,y1:a-e.size,x2:r+e.size,y2:a-e.size,height:o-a+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),s=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),a=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:a-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(t.x*t.x+t.y*t.y);return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],a=0;4>a;a++){var o=this.projection(t[a],e),n=this.projection(i[a],e);s.push(o.x*e.x+o.y*e.y),r.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),g=Math.min.apply(Math,s),h=Math.min.apply(Math,r);return l>=h&&d>=g},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;4>r;r++)s=s&&this.axisCollision(i[r],e,t);return s}},g=function(e){this._geom=d,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0,this._indexEdges=e||!1};g.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i,s,r,o,n,g,h,c=t.prefix||"",u=t.curvatureCoefficients;if(this._tree=l(t.bounds,0,t.maxElements,t.maxLevel),this._indexEdges){var m=e.edges();for(o=0,n=m.length;n>o;o++)s=e.nodes(m[o].source),r=e.nodes(m[o].target),h={x1:s[c+"x"],y1:s[c+"y"],x2:r[c+"x"],y2:r[c+"y"],size:m[o][c+"size"]||0},"curve"===m[o].type||"curvedArrow"===m[o].type?s.id===r.id?(g={x:s[c+"x"],y:s[c+"y"],size:s[c+"size"]||0},a(m[o],d.selfLoopToSquare(g),this._tree)):(i=sigma.utils.getQuadraticControlPoint(h.x1,h.y1,h.x2,h.y2,m[o].cc||u),a(m[o],d.quadraticCurveToSquare(h,i),this._tree)):a(m[o],d.lineToSquare(h),this._tree)}else{var f=e.nodes();for(o=0,n=f.length;n>o;o++)a(f[o],d.pointToSquare({x:f[o][c+"x"],y:f[o][c+"y"],size:f[o][c+"size"]}),this._tree)}return this._cache={query:!1,result:!1},this._tree},g.prototype.point=function(e,t){return this._enabled&&this._tree?o({x:e,y:t},this._tree)||[]:[]},g.prototype.area=function(e){if(!this._enabled)return[];var t,r,a=JSON.stringify(e);if(this._cache.query===a)return this._cache.result;d.isAxisAligned(e)?(t=i,r=d.axisAlignedTopPoints(e)):(t=s,r=d.rectangleCorners(e));var o=this._tree?n(r,this._tree,t):[],l=[];for(var g in o)l.push(o[g]);return this._cache.query=a,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=g,this.sigma.classes.edgequad=g.bind(this,!0)):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports.quad=g):this.quad=g}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function s(e){var t,i,s;return T("mouseEnabled")&&(E.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),p)?(y=!0,x=!0,b&&clearTimeout(b),b=setTimeout(function(){y=!1},T("dragTimeout")),sigma.misc.animation.killAll(A),A.isMoving=!0,s=A.cameraPosition(sigma.utils.getX(e)-m,sigma.utils.getY(e)-f,!0),t=g-s.x,i=h-s.y,(t!==A.x||i!==A.y)&&(c=A.x,u=A.y,A.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function r(e){if(T("mouseEnabled")&&p){p=!1,b&&clearTimeout(b),A.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);y?(sigma.misc.animation.killAll(A),sigma.misc.animation.camera(A,{x:A.x+T("mouseInertiaRatio")*(A.x-c),y:A.y+T("mouseInertiaRatio")*(A.y-u)},{easing:"quadraticOut",duration:T("mouseInertiaDuration")})):(m!==t||f!==i)&&A.goTo({x:A.x,y:A.y}),E.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),y=!1}}function a(e){if(T("mouseEnabled"))switch(g=A.x,h=A.y,c=A.x,u=A.y,m=sigma.utils.getX(e),f=sigma.utils.getY(e),x=!1,v=(new Date).getTime(),e.which){case 2:break;case 3:E.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,m,f));break;default:p=!0,E.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,m,f))}}function o(e){T("mouseEnabled")&&E.dispatchEvent("mouseout")}function n(e){if(T("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-v>100&&x,E.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,s;return T("mouseEnabled")?(i=1/T("doubleClickZoomingRatio"),E.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,m,f)),T("doubleClickEnabled")&&(t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("doubleClickZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function d(e){var t,i,s;return T("mouseEnabled")&&T("mouseWheelEnabled")?(i=sigma.utils.getDelta(e)>0?1/T("zoomingRatio"):T("zoomingRatio"),t=A.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:T("mouseZoomDuration")},sigma.utils.zoomTo(A,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var g,h,c,u,m,f,p,y,x,v,b,E=this,w=e,A=t,T=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(w,"click",l),w.addEventListener("DOMMouseScroll",d,!1),w.addEventListener("mousewheel",d,!1),w.addEventListener("mousemove",s,!1),w.addEventListener("mousedown",a,!1),w.addEventListener("click",n,!1),w.addEventListener("mouseout",o,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(w,"click"),w.removeEventListener("DOMMouseScroll",d),w.removeEventListener("mousewheel",d),w.removeEventListener("mousemove",s),w.removeEventListener("mousedown",a),w.removeEventListener("click",n),w.removeEventListener("mouseout",o),document.removeEventListener("mouseup",r)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function s(e){var t=sigma.utils.getOffset(P);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(k("touchEnabled")){var t,i,r,a,o,n;switch(N=e.touches,N.length){case 1:_.isMoving=!0,w=1,l=_.x,d=_.y,c=_.x,u=_.y,o=s(N[0]),p=o.x,y=o.y;break;case 2:return _.isMoving=!0,w=2,o=s(N[0]),n=s(N[1]),t=o.x,r=o.y,i=n.x,a=n.y,c=_.x,u=_.y,g=_.angle,h=_.ratio,l=_.x,d=_.y,p=t,y=r,x=i,v=a,b=Math.atan2(v-y,x-p),E=Math.sqrt((v-y)*(v-y)+(x-p)*(x-p)),e.preventDefault(),!1}}}function a(e){if(k("touchEnabled")){N=e.touches;var t=k("touchInertiaRatio");switch(S&&(A=!1,clearTimeout(S)),w){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:_.isMoving=!1,C.dispatchEvent("stopDrag"),A&&(T=!1,sigma.misc.animation.camera(_,{x:_.x+t*(_.x-c),y:_.y+t*(_.y-u)},{easing:"quadraticOut",duration:k("touchInertiaDuration")})),A=!1,w=0}}}function o(e){if(!T&&k("touchEnabled")){var t,i,r,a,o,n,P,M,z,L,R,O,I,F,B,j,D;switch(N=e.touches,A=!0,S&&clearTimeout(S),S=setTimeout(function(){A=!1},k("dragTimeout")),w){case 1:M=s(N[0]),t=M.x,r=M.y,L=_.cameraPosition(t-p,r-y,!0),F=l-L.x,B=d-L.y,(F!==_.x||B!==_.y)&&(c=_.x,u=_.y,_.goTo({x:F,y:B}),C.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,M.x,M.y)),C.dispatchEvent("drag"));break;case 2:M=s(N[0]),z=s(N[1]),t=M.x,r=M.y,i=z.x,a=z.y,R=_.cameraPosition((p+x)/2-sigma.utils.getCenter(e).x,(y+v)/2-sigma.utils.getCenter(e).y,!0),P=_.cameraPosition((t+i)/2-sigma.utils.getCenter(e).x,(r+a)/2-sigma.utils.getCenter(e).y,!0),O=Math.atan2(a-r,i-t)-b,I=Math.sqrt((a-r)*(a-r)+(i-t)*(i-t))/E,t=R.x,r=R.y,j=h/I,t*=I,r*=I,D=g-O,o=Math.cos(-O),n=Math.sin(-O),i=t*o+r*n,a=r*o-t*n,t=i,r=a,F=t-P.x+l,B=r-P.y+d,(j!==_.ratio||D!==_.angle||F!==_.x||B!==_.y)&&(c=_.x,u=_.y,m=_.angle,f=_.ratio,_.goTo({x:F,y:B,angle:D,ratio:j}),C.dispatchEvent("drag"))}return e.preventDefault(),!1}}function n(e){var t,i,r;return e.touches&&1===e.touches.length&&k("touchEnabled")?(T=!0,i=1/k("doubleClickZoomingRatio"),t=s(e.touches[0]),C.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),k("doubleClickEnabled")&&(t=_.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),r={duration:k("doubleClickZoomDuration"),onComplete:function(){T=!1}},sigma.utils.zoomTo(_,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var l,d,g,h,c,u,m,f,p,y,x,v,b,E,w,A,T,S,C=this,P=e,_=t,k=i,N=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(P,"touchstart",n),P.addEventListener("touchstart",r,!1),P.addEventListener("touchend",a,!1),P.addEventListener("touchcancel",a,!1),P.addEventListener("touchleave",a,!1),P.addEventListener("touchmove",o,!1),this.kill=function(){sigma.utils.unbindDoubleClick(P,"touchstart"),P.addEventListener("touchstart",r),P.addEventListener("touchend",a),P.addEventListener("touchcancel",a),P.addEventListener("touchleave",a),P.addEventListener("touchmove",o)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.canvas: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,a,o,n;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,a=o.length;a>r;r++)n="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.applyRenderers=function(e){var t,i,s,r=e.elements,a={font:e.ctx.font},o=e.elements||"edges"==e.type?"defaultEdgeType":"defaultNodeType";for(e.start=e.start||0,e.end=e.end||e.elements.length,e.end=Math.min(e.elements.length,e.end),e.ctx.save(),t=e.start;t<e.end;t++)r[t].hidden||(i=e.renderers[r[t].type||e.settings(o)],s=i||e.renderers.def,"edges"==e.type?s(r[t],e.graph.nodes(r[t].source),e.graph.nodes(r[t].target),e.ctx,e.settings,{ctx:a}):s(r[t],e.ctx,e.settings,{ctx:a}));e.ctx.restore()},sigma.renderers.canvas.prototype.renderEdges=function(e,t,i){var s={renderers:sigma.canvas.edges,type:"edges",elements:this.edgesOnScreen,ctx:this.contexts.edges,start:e,end:t,graph:this.graph,settings:i};sigma.renderers.canvas.applyRenderers(s),i("drawEdgeLabels")&&(s.renderers=sigma.canvas.edges.labels,s.ctx=this.contexts.labels,sigma.renderers.canvas.applyRenderers(s))},sigma.renderers.canvas.prototype.render=function(t){t=t||{},this.dispatchEvent("beforeRender");var i,s,r,a,o,n,l,d,g,h,c,u,m={},f=this.graph,p=this.graph.nodes,y=(this.options.prefix||"",this.settings(t,"drawEdges")),x=this.settings(t,"drawNodes"),v=this.settings(t,"drawLabels"),b=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(y=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,a=i.length;a>s;s++)m[i[s].id]=i[s];if(y){if(this.edgesOnScreen=[],b("edgesClippingWithNodes"))for(i=f.edges(),s=0,a=i.length;a>s;s++)o=i[s],!m[o.source]&&!m[o.target]||o.hidden||p(o.source).hidden||p(o.target).hidden||this.edgesOnScreen.push(o);else this.edgesOnScreen=this.camera.edgequadtree.area(this.camera.getRectangle(this.width,this.height));b("batchEdgesDrawing")?(n="edges_"+this.conradId,c=b("canvasEdgesBatchSize"),h=this.edgesOnScreen,a=h.length,g=0,l=Math.min(h.length,g+c),d=function(){return u=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",this.renderEdges(g,l,b),this.contexts.edges.globalCompositeOperation=u,l===h.length?(delete this.jobs[n],!1):(g=l+1,l=Math.min(h.length,g+c),!0)},this.jobs[n]=d,conrad.addJob(n,d.bind(this))):this.renderEdges(0,this.edgesOnScreen.length,b)}return x&&sigma.renderers.canvas.applyRenderers({renderers:sigma.canvas.nodes,type:"nodes",ctx:this.contexts.nodes,elements:this.nodesOnScreen,settings:b}),v&&sigma.renderers.canvas.applyRenderers({renderers:sigma.canvas.labels,type:"nodes",ctx:this.contexts.labels,elements:this.nodesOnScreen,settings:b}),this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var s,r=this.width,a=this.height,o=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||a!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.domElements[s].setAttribute("width",t*o+"px"),this.domElements[s].setAttribute("height",i*o+"px"),1!==o&&this.contexts[s].scale(o,o));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.webgl: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,a,o,n;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(s,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,a=o.length;a>r;r++)n="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,s,r,a,o=this.graph,n=sigma.utils.extend(n,this.options),l=this.settings(n,"defaultEdgeType"),d=this.settings(n,"defaultNodeType");for(s in this.nodeFloatArrays)delete this.nodeFloatArrays[s];for(s in this.edgeFloatArrays)delete this.edgeFloatArrays[s];for(s in this.edgeIndicesArrays)delete this.edgeIndicesArrays[s];for(e=o.edges(),t=0,i=e.length;i>t;t++)r=e[t].type||l,s=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[s]||(this.edgeFloatArrays[s]={edges:[]}),this.edgeFloatArrays[s].edges.push(e[t]);for(e=o.nodes(),t=0,i=e.length;i>t;t++)r=e[t].type||d,s=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[s]||(this.nodeFloatArrays[s]={nodes:[]}),this.nodeFloatArrays[s].nodes.push(e[t]);for(s in this.edgeFloatArrays){for(a=sigma.webgl.edges[s],e=this.edgeFloatArrays[s].edges,this.edgeFloatArrays[s].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES),t=0,i=e.length;i>t;t++)e[t].hidden||o.nodes(e[t].source).hidden||o.nodes(e[t].target).hidden||a.addEdge(e[t],o.nodes(e[t].source),o.nodes(e[t].target),this.edgeFloatArrays[s].array,t*a.POINTS*a.ATTRIBUTES,n.prefix,this.settings);"function"==typeof a.computeIndices&&(this.edgeIndicesArrays[s]=a.computeIndices(this.edgeFloatArrays[s].array))}for(s in this.nodeFloatArrays)for(a=sigma.webgl.nodes[s],e=this.nodeFloatArrays[s].nodes,this.nodeFloatArrays[s].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES),t=0,i=e.length;i>t;t++)this.nodeFloatArrays[s].array||(this.nodeFloatArrays[s].array=new Float32Array(e.length*a.POINTS*a.ATTRIBUTES)),e[t].hidden||a.addNode(e[t],this.nodeFloatArrays[s].array,t*a.POINTS*a.ATTRIBUTES,n.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,s,r,a,o,n,l=this,d=(this.graph,this.contexts.nodes),g=this.contexts.edges,h=this.camera.getMatrix(),c=sigma.utils.extend(t,this.options),u=this.settings(c,"drawLabels"),m=this.settings(c,"drawEdges"),f=this.settings(c,"drawNodes");this.resize(!1),this.settings(c,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),h=sigma.utils.matrices.multiply(h,sigma.utils.matrices.translation(this.width/2,this.height/2));for(a in this.jobs)conrad.hasJob(a)&&conrad.killJob(a);if(m)if(this.settings(c,"batchEdgesDrawing"))(function(){var e,t,i,s,r,a,o,n,l,d;i="edges_"+this.conradId,d=this.settings(c,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,l=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,n=this.edgeIndicesArrays[e[t]],o=0,a=Math.min(o+d*l.POINTS,r.length/l.ATTRIBUTES),s=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=l.initProgram(g)),a>o&&(g.useProgram(this.edgePrograms[e[t]]),l.render(g,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),start:o,count:a-o,indicesData:n})),a>=r.length/l.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(a>=r.length/l.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,l=sigma.webgl.edges[e[t]],o=0,a=Math.min(o+d*l.POINTS,r.length/l.ATTRIBUTES)):(o=a,a=Math.min(o+d*l.POINTS,r.length/l.ATTRIBUTES)),!0)},this.jobs[i]=s,conrad.addJob(i,s.bind(this)))}).call(this);else for(a in this.edgeFloatArrays)n=sigma.webgl.edges[a],this.edgePrograms[a]||(this.edgePrograms[a]=n.initProgram(g)),this.edgeFloatArrays[a]&&(g.useProgram(this.edgePrograms[a]),n.render(g,this.edgePrograms[a],this.edgeFloatArrays[a].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[a]}));if(f){d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND);for(a in this.nodeFloatArrays)n=sigma.webgl.nodes[a],this.nodePrograms[a]||(this.nodePrograms[a]=n.initProgram(d)),this.nodeFloatArrays[a]&&(d.useProgram(this.nodePrograms[a]),n.render(d,this.nodePrograms[a],this.nodeFloatArrays[a].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,
scalingRatio:this.settings(c,"webglOversamplingRatio")}))}if(u)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),o=function(e){return l.settings({prefix:l.camera.prefix},e)},s=0,r=i.length;r>s;s++)i[s].hidden||(sigma.canvas.labels[i[s].type||this.settings(c,"defaultNodeType")]||sigma.canvas.labels.def)(i[s],this.contexts.labels,o);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var s=document.createElement(e),r=this;s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(s.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),s.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,i){var s,r=this.width,a=this.height,o=sigma.utils.getPixelRatio();if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||a!==this.height)for(s in this.domElements)this.domElements[s].style.width=t+"px",this.domElements[s].style.height=i+"px","canvas"===this.domElements[s].tagName.toLowerCase()&&(this.contexts[s]&&this.contexts[s].scale?(this.domElements[s].setAttribute("width",t*o+"px"),this.domElements[s].setAttribute("height",i*o+"px"),1!==o&&this.contexts[s].scale(o,o)):(this.domElements[s].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[s].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(s in this.contexts)this.contexts[s]&&this.contexts[s].viewport&&this.contexts[s].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.svg: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,a,o,n,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},edgelabels:{},hovers:{}},this.measurementCanvas=null,this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,a=o.length;a>r;r++)n="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new n(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{},this.dispatchEvent("beforeRender");var i,s,r,a,o,n,l,d,g,h={},c=this.graph,u=this.graph.nodes,m=(this.options.prefix||"",this.settings(t,"drawEdges")),f=this.settings(t,"drawNodes"),p=this.settings(t,"drawLabels"),y=this.settings(t,"drawEdgeLabels"),x=this.settings(t,"defaultEdgeType"),v=this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels});for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.hideDOMElements(this.domElements.edgelabels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,s=0,a=i.length;a>s;s++)h[i[s].id]=i[s];for(i=c.edges(),s=0,a=i.length;a>s;s++)o=i[s],!h[o.source]&&!h[o.target]||o.hidden||u(o.source).hidden||u(o.target).hidden||this.edgesOnScreen.push(o);if(d=sigma.svg.nodes,g=sigma.svg.labels,f)for(i=this.nodesOnScreen,s=0,a=i.length;a>s;s++)i[s].hidden||this.domElements.nodes[i[s].id]||(r=(d[i[s].type]||d.def).create(i[s],v),this.domElements.nodes[i[s].id]=r,this.domElements.groups.nodes.appendChild(r),p&&(r=(g[i[s].type]||g.def).create(i[s],v),this.domElements.labels[i[s].id]=r,this.domElements.groups.labels.appendChild(r)));if(f)for(i=this.nodesOnScreen,s=0,a=i.length;a>s;s++)i[s].hidden||((d[i[s].type]||d.def).update(i[s],this.domElements.nodes[i[s].id],v),p&&(g[i[s].type]||g.def).update(i[s],this.domElements.labels[i[s].id],v));if(d=sigma.svg.edges,g=sigma.svg.edges.labels,m)for(i=this.edgesOnScreen,s=0,a=i.length;a>s;s++)this.domElements.edges[i[s].id]||(n=u(i[s].source),l=u(i[s].target),r=(d[i[s].type]||d[x]||d.def).create(i[s],n,l,v),this.domElements.edges[i[s].id]=r,this.domElements.groups.edges.appendChild(r),y&&(r=(g[i[s].type]||g[x]||g.def).create(i[s],v),this.domElements.edgelabels[i[s].id]=r,this.domElements.groups.edgelabels.appendChild(r)));if(m)for(i=this.edgesOnScreen,s=0,a=i.length;a>s;s++)n=u(i[s].source),l=u(i[s].target),(d[i[s].type]||d[x]||d.def).update(i[s],this.domElements.edges[i[s].id],n,l,v),y&&(g[i[s].type]||g[x]||g.def).update(i[s],n,l,this.domElements.edgelabels[i[s].id],v);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i,s,r=document.createElementNS(this.settings("xmlns"),e),a=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",a+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var o=document.createElement("canvas");o.setAttribute("class",a+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var n=["edges","nodes","edgelabels","labels","hovers"];for(s=0,i=n.length;i>s;s++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",a+"-group-"+n[s]),t.setAttributeNS(null,"class",a+"-group"),this.domElements.groups[n[s]]=this.domElements.graph.appendChild(t);this.container.appendChild(o),this.measurementCanvas=o.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){function t(t){var i,o=a.settings.embedObjects({prefix:e});if(o("enableHovering"))if(t.data.enter.nodes.length>0){i=t.data.enter.nodes[0];var n=(r[i.type]||r.def).create(i,a.domElements.nodes[i.id],a.measurementCanvas,o);a.domElements.hovers[i.id]=n,a.domElements.groups.hovers.appendChild(n),s=i}else t.data.leave.nodes.length>0&&(i=t.data.leave.nodes[0],a.domElements.groups.hovers.removeChild(a.domElements.hovers[i.id]),s=null,delete a.domElements.hovers[i.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[i.id]))}function i(){if(s){var t=a.settings.embedObjects({prefix:e});a.domElements.groups.hovers.removeChild(a.domElements.hovers[s.id]),delete a.domElements.hovers[s.id];var i=(r[s.type]||r.def).create(s,a.domElements.nodes[s.id],a.measurementCanvas,t);a.domElements.hovers[s.id]=i,a.domElements.groups.hovers.appendChild(i)}}var s,r=sigma.svg.hovers,a=this;this.bind("hovers",t),this.bind("render",i)},sigma.renderers.svg.prototype.resize=function(t,i){var s=this.width,r=this.height;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight),(s!==this.width||r!==this.height)&&(this.domElements.graph.style.width=this.width+"px",this.domElements.graph.style.height=this.height+"px"),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels"),sigma.utils.pkg("sigma.svg.edgelabels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.def=sigma.utils.isWebGLSupported()?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,s,r){var a=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=a,t[i++]=0,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=a,t[i++]=2*Math.PI/3,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=a,t[i++]=4*Math.PI/3},render:function(e,t,i,s){var r,a=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),d=e.getUniformLocation(t,"u_resolution"),g=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(d,s.width,s.height),e.uniform1f(h,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(c,s.scalingRatio),e.uniformMatrix3fv(g,!1,s.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,s,r){t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,i,s){var r,a=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_ratio"),h=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,s.width,s.height),e.uniform1f(g,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(h,s.scalingRatio),e.uniformMatrix3fv(d,!1,s.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,s,r,a,o){var n=(e[a+"size"]||1)/2,l=t[a+"x"],d=t[a+"y"],g=i[a+"x"],h=i[a+"y"],c=e.color;if(!c)switch(o("edgeColor")){case"source":c=t.color||o("defaultNodeColor");break;case"target":c=i.color||o("defaultNodeColor");break;default:c=o("defaultEdgeColor")}c=sigma.utils.floatColor(c),s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=0,s[r++]=c,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=1,s[r++]=c,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=c,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=1,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=0,s[r++]=c},render:function(e,t,i,s){var r,a=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position1"),n=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_minus"),g=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_matrixHalfPi"),u=e.getUniformLocation(t,"u_matrixHalfPiMinus"),m=e.getUniformLocation(t,"u_ratio"),f=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(g,s.width,s.height),e.uniform1f(m,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(f,s.scalingRatio),e.uniformMatrix3fv(h,!1,s.matrix),e.uniformMatrix2fv(c,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,s,r,a,o){var n=((e[a+"size"]||1)/2,t[a+"x"]),l=t[a+"y"],d=i[a+"x"],g=i[a+"y"],h=e.color;if(!h)switch(o("edgeColor")){case"source":h=t.color||o("defaultNodeColor");break;case"target":h=i.color||o("defaultNodeColor");break;default:h=o("defaultEdgeColor")}h=sigma.utils.floatColor(h),s[r++]=n,s[r++]=l,s[r++]=h,s[r++]=d,s[r++]=g,s[r++]=h},render:function(e,t,i,s){var r,a=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position"),n=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(n,s.width,s.height),e.uniformMatrix3fv(l,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,s,r,a,o){var n=(e[a+"size"]||1)/2,l=t[a+"x"],d=t[a+"y"],g=i[a+"x"],h=i[a+"y"],c=i[a+"size"],u=e.color;if(!u)switch(o("edgeColor")){case"source":u=t.color||o("defaultNodeColor");break;case"target":u=i.color||o("defaultNodeColor");break;default:u=o("defaultEdgeColor")}u=sigma.utils.floatColor(u),s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=c,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=c,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=l,s[r++]=d,s[r++]=g,s[r++]=h,s[r++]=n,s[r++]=c,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=-1,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=u,s[r++]=g,s[r++]=h,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=c,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=1,s[r++]=u},render:function(e,t,i,s){var r,a=e.getAttribLocation(t,"a_pos1"),o=e.getAttribLocation(t,"a_pos2"),n=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),d=e.getAttribLocation(t,"a_delay"),g=e.getAttribLocation(t,"a_minus"),h=e.getAttribLocation(t,"a_head"),c=e.getAttribLocation(t,"a_headPosition"),u=e.getAttribLocation(t,"a_color"),m=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),p=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),x=e.getUniformLocation(t,"u_ratio"),v=e.getUniformLocation(t,"u_nodeRatio"),b=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(m,s.width,s.height),e.uniform1f(x,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(v,Math.pow(s.ratio,s.settings("nodesPowRatio"))/s.ratio),e.uniform1f(b,5),e.uniform1f(E,s.scalingRatio),e.uniformMatrix3fv(f,!1,s.matrix),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.enableVertexAttribArray(g),e.enableVertexAttribArray(h),e.enableVertexAttribArray(c),e.enableVertexAttribArray(u),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,s;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),s=sigma.utils.loadProgram(e,[t,i])}}}(),function(e){"use strict";function t(e,t){if(1>=t)return[e];for(var s=e.split(" "),r=[],a=0,o=-1,n=[],l=!0,d=0;d<s.length;++d)if(l){if(s[d].length>t){for(var g=i(s[d],t),h=0;h<g.length;++h)r.push([g[h]]),++o;a=g[g.length-1].length}else r.push([s[d]]),++o,a=s[d].length+1;l=!1}else a+s[d].length<=t?(r[o].push(s[d]),a+=s[d].length+1):(l=!0,--d);for(d=0;d<r.length;++d)n.push(r[d].join(" "));return n}function i(e,t){for(var i=[],s=0;s<e.length;s+=t-1)i.push(e.substr(s,t-1)+"-");var r=i[i.length-1].length;return i[i.length-1]=i[i.length-1].substr(0,r-1)+" ",i}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,i,s,r){var a,o,n,l,d=s("prefix")||"",g=e[d+"size"]||1,h=s("fontStyle"),c=s("nodeBorderSize"),u=s("labelAlignment"),m=s("maxNodeLabelLineLength")||0;if(!(g<=s("labelThreshold"))&&e.label&&"string"==typeof e.label){a="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*g;var f=(h?h+" ":"")+a+"px "+(e.active?s("activeFont")||s("font"):s("font"));switch(r&&r.ctx.font!=f?(i.font=f,r.ctx.font=f):i.font=f,i.fillStyle="node"===s("labelColor")?e.color||s("defaultNodeColor"):s("defaultLabelColor"),n=0,l=a/3,i.textAlign="center",u){case"bottom":l=+g+4*a/3;break;case"center":break;case"left":i.textAlign="right",n=-g-c-3;break;case"top":l=-g-2*a/3;break;case"inside":if(o=sigma.utils.canvas.getTextWidth(i,s("approximateLabelWidth"),a,e.label),2*(g+a/3)>=o)break;case"right":default:n=g+c+3,i.textAlign="left"}for(var p=t(e.label,m),y=e[d+"x"]+n,x=Math.round(e[d+"y"]+l),v=0;v<p.length;++v)i.fillText(p[v],y,x+v*(a+1))}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){function s(e,t,s,r,a,o){var n=o>1&&a.length>1?.6*o*s:sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),s,a[0]),l=Math.round(r[c+"x"]),g=Math.round(r[c+"y"]),h=(s+1)*a.length+4,m=Math.round(u+s/4),f=Math.round(n+u+1.5+s/3);if(r.label&&"string"==typeof r.label)switch(e){case"center":break;case"left":l=Math.round(r[c+"x"]+s/2+2),g=Math.round(r[c+"y"]-s/2-2),t.moveTo(l,g+m),t.arcTo(l,g,l-m,g,m),t.lineTo(l-f-d-m,g),t.lineTo(l-f-d-m,g+h),t.lineTo(l-m,g+h),t.arcTo(l,g+h,l,g+h-m,m),t.lineTo(l,g+m);break;case"top":t.rect(l-f/2,g-m-h,f,h);break;case"bottom":t.rect(l-f/2,g+m,f,h);break;case"inside":if(2*m>=n)break;case"right":default:l=Math.round(r[c+"x"]-s/2-2),g=Math.round(r[c+"y"]-s/2-2),t.moveTo(l,g+m),t.arcTo(l,g,l+m,g,m),t.lineTo(l+f+d+m,g),t.lineTo(l+f+d+m,g+h),t.lineTo(l+m,g+h),t.arcTo(l,g+h,l,g+h-m,m),t.lineTo(l,g+m)}t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function r(e,t){if(1>=t)return[e];for(var i=e.split(" "),s=[],r=0,o=-1,n=[],l=!0,d=0;d<i.length;++d)if(l){if(i[d].length>t){for(var g=a(i[d],t),h=0;h<g.length;++h)s.push([g[h]]),++o;r=g[g.length-1].length}else s.push([i[d]]),++o,r=i[d].length+1;l=!1}else r+i[d].length<=t?(s[o].push(i[d]),r+=i[d].length+1):(l=!0,--d);for(d=0;d<s.length;++d)n.push(s[d].join(" "));return n}function a(e,t){for(var i=[],s=0;s<e.length;s+=t-1)i.push(e.substr(s,t-1)+"-");var r=i[i.length-1].length;return i[i.length-1]=i[i.length-1].substr(0,r-1)+" ",i}var o,n,l,d=i("nodeBorderSize"),g=i("labelAlignment"),h=i("hoverFontStyle")||i("fontStyle"),c=i("prefix")||"",u=e[c+"size"],m=i("maxNodeLabelLineLength")||0,f="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*u;t.font=(h?h+" ":"")+f+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),o=r(e.label,m),s(g,t,f,e,o,m),d>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[c+"x"],e[c+"y"],u+d,0,2*Math.PI,!0),t.closePath(),t.fill());var p=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;if(p(e,t,i),e.label&&"string"==typeof e.label){t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor");var y=sigma.utils.canvas.getTextWidth(t,i("approximateLabelWidth"),f,e.label),x=-y/2,v=f/3;switch(g){case"bottom":v=+u+4*f/3;break;case"center":break;case"left":x=-u-d-3-y;break;case"top":v=-u-2*f/3;break;case"inside":if(2*(u+f/3)>=y)break;case"right":default:x=u+d+3}n=e[c+"x"]+x,l=Math.round(e[c+"y"]+v);for(var b=0;b<o.length;++b)t.fillText(o[b],n,l+b*(f+1))}}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var s=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[s+"x"],e[s+"y"],e[s+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=e[o+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),g=r("defaultEdgeColor");if(!a)switch(l){case"source":a=t.color||d;break;case"target":a=i.color||d;break;default:a=g}s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(t[o+"x"],t[o+"y"]),s.lineTo(i[o+"x"],i[o+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=e[o+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),g=r("defaultEdgeColor"),h={},c=t[o+"size"],u=t[o+"x"],m=t[o+"y"],f=i[o+"x"],p=i[o+"y"];if(h=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,c):sigma.utils.getQuadraticControlPoint(u,m,f,p,e.cc),!a)switch(l){case"source":a=t.color||d;break;case"target":a=i.color||d;break;default:a=g}s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,f,p):s.quadraticCurveTo(h.x,h.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),g=e[o+"size"]||1,h=i[o+"size"],c=t[o+"x"],u=t[o+"y"],m=i[o+"x"],f=i[o+"y"],p=Math.max(2.5*g,r("minArrowSize")),y=Math.sqrt((m-c)*(m-c)+(f-u)*(f-u)),x=c+(m-c)*(y-p-h)/y,v=u+(f-u)*(y-p-h)/y,b=(m-c)*p/y,E=(f-u)*p/y;if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}s.strokeStyle=a,s.lineWidth=g,s.beginPath(),s.moveTo(c,u),s.lineTo(x,v),s.stroke(),s.fillStyle=a,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,i,s,r){var a,o,n,l,d,g=e.color,h=r("prefix")||"",c=r("edgeColor"),u=r("defaultNodeColor"),m=r("defaultEdgeColor"),f={},p=e[h+"size"]||1,y=i[h+"size"],x=t[h+"x"],v=t[h+"y"],b=i[h+"x"],E=i[h+"y"],w=Math.max(2.5*p,r("minArrowSize"));

if(f=t.id===i.id?sigma.utils.getSelfLoopControlPoints(x,v,y):sigma.utils.getQuadraticControlPoint(x,v,b,E,e.cc),t.id===i.id?(a=Math.sqrt((b-f.x1)*(b-f.x1)+(E-f.y1)*(E-f.y1)),o=f.x1+(b-f.x1)*(a-w-y)/a,n=f.y1+(E-f.y1)*(a-w-y)/a,l=(b-f.x1)*w/a,d=(E-f.y1)*w/a):(a=Math.sqrt((b-f.x)*(b-f.x)+(E-f.y)*(E-f.y)),o=f.x+(b-f.x)*(a-w-y)/a,n=f.y+(E-f.y)*(a-w-y)/a,l=(b-f.x)*w/a,d=(E-f.y)*w/a),!g)switch(c){case"source":g=t.color||u;break;case"target":g=i.color||u;break;default:g=m}s.strokeStyle=g,s.lineWidth=p,s.beginPath(),s.moveTo(x,v),t.id===i.id?s.bezierCurveTo(f.x2,f.y2,f.x1,f.y1,o,n):s.quadraticCurveTo(f.x,f.y,o,n),s.stroke(),s.fillStyle=g,s.beginPath(),s.moveTo(o+l,n+d),s.lineTo(o+.6*d,n-.6*l),s.lineTo(o-.6*d,n+.6*l),s.lineTo(o+l,n+d),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=e[o+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),g=r("defaultEdgeColor");if(!a)switch(l){case"source":a=t.color||d;break;case"target":a=i.color||d;break;default:a=g}a="edge"===r("edgeHoverColor")?e.hover_color||a:e.hover_color||r("defaultEdgeHoverColor")||a,n*=r("edgeHoverSizeRatio"),s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(t[o+"x"],t[o+"y"]),s.lineTo(i[o+"x"],i[o+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=r("edgeHoverSizeRatio")*(e[o+"size"]||1),l=r("edgeColor"),d=r("defaultNodeColor"),g=r("defaultEdgeColor"),h={},c=t[o+"size"],u=t[o+"x"],m=t[o+"y"],f=i[o+"x"],p=i[o+"y"];if(h=t.id===i.id?sigma.utils.getSelfLoopControlPoints(u,m,c):sigma.utils.getQuadraticControlPoint(u,m,f,p,e.cc),!a)switch(l){case"source":a=t.color||d;break;case"target":a=i.color||d;break;default:a=g}a="edge"===r("edgeHoverColor")?e.hover_color||a:e.hover_color||r("defaultEdgeHoverColor")||a,s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(u,m),t.id===i.id?s.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,f,p):s.quadraticCurveTo(h.x,h.y,f,p),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),g=e[o+"size"]||1,h=i[o+"size"],c=t[o+"x"],u=t[o+"y"],m=i[o+"x"],f=i[o+"y"];g=e.hover?r("edgeHoverSizeRatio")*g:g;var p=Math.max(2.5*g,r("minArrowSize")),y=Math.sqrt((m-c)*(m-c)+(f-u)*(f-u)),x=c+(m-c)*(y-p-h)/y,v=u+(f-u)*(y-p-h)/y,b=(m-c)*p/y,E=(f-u)*p/y;if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}a="edge"===r("edgeHoverColor")?e.hover_color||a:e.hover_color||r("defaultEdgeHoverColor")||a,s.strokeStyle=a,s.lineWidth=g,s.beginPath(),s.moveTo(c,u),s.lineTo(x,v),s.stroke(),s.fillStyle=a,s.beginPath(),s.moveTo(x+b,v+E),s.lineTo(x+.6*E,v-.6*b),s.lineTo(x-.6*E,v+.6*b),s.lineTo(x+b,v+E),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var a,o,n,l,d,g,h=e.color,c=r("prefix")||"",u=r("edgeColor"),m=r("defaultNodeColor"),f=r("defaultEdgeColor"),p={},y=r("edgeHoverSizeRatio")*(e[c+"size"]||1),x=i[c+"size"],v=t[c+"x"],b=t[c+"y"],E=i[c+"x"],w=i[c+"y"];if(p=t.id===i.id?sigma.utils.getSelfLoopControlPoints(v,b,x):sigma.utils.getQuadraticControlPoint(v,b,E,w,e.cc),t.id===i.id?(a=Math.sqrt((E-p.x1)*(E-p.x1)+(w-p.y1)*(w-p.y1)),o=Math.max(2.5*y,r("minArrowSize")),n=p.x1+(E-p.x1)*(a-o-x)/a,l=p.y1+(w-p.y1)*(a-o-x)/a,d=(E-p.x1)*o/a,g=(w-p.y1)*o/a):(a=Math.sqrt((E-p.x)*(E-p.x)+(w-p.y)*(w-p.y)),o=2.5*y,n=p.x+(E-p.x)*(a-o-x)/a,l=p.y+(w-p.y)*(a-o-x)/a,d=(E-p.x)*o/a,g=(w-p.y)*o/a),!h)switch(u){case"source":h=t.color||m;break;case"target":h=i.color||m;break;default:h=f}h="edge"===r("edgeHoverColor")?e.hover_color||h:e.hover_color||r("defaultEdgeHoverColor")||h,s.strokeStyle=h,s.lineWidth=y,s.beginPath(),s.moveTo(v,b),t.id===i.id?s.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,n,l):s.quadraticCurveTo(p.x,p.y,n,l),s.stroke(),s.fillStyle=h,s.beginPath(),s.moveTo(n+d,l+g),s.lineTo(n+.6*g,l-.6*d),s.lineTo(n-.6*g,l+.6*d),s.lineTo(n+d,l+g),s.closePath(),s.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,s,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,s,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,s,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){var i=(t("prefix")||"",document.createElementNS(t("xmlns"),"circle"));return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var s=i("prefix")||"";return t.setAttributeNS(null,"cx",e[s+"x"]),t.setAttributeNS(null,"cy",e[s+"y"]),t.setAttributeNS(null,"r",e[s+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,i,s){var r=e.color,a=(s("prefix")||"",s("edgeColor")),o=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(a){case"source":r=t.color||o;break;case"target":r=i.color||o;break;default:r=n}var l=document.createElementNS(s("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var a=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[a+"size"]||1),t.setAttributeNS(null,"x1",i[a+"x"]),t.setAttributeNS(null,"y1",i[a+"y"]),t.setAttributeNS(null,"x2",s[a+"x"]),t.setAttributeNS(null,"y2",s[a+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,i,s){var r=e.color,a=(s("prefix")||"",s("edgeColor")),o=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(a){case"source":r=t.color||o;break;case"target":r=i.color||o;break;default:r=n}var l=document.createElementNS(s("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var a,o,n=r("prefix")||"",l=i[n+"size"],d=i[n+"x"],g=i[n+"y"],h=s[n+"x"],c=s[n+"y"];return t.setAttributeNS(null,"stroke-width",e[n+"size"]||1),i.id===s.id?(a=sigma.utils.getSelfLoopControlPoints(d,g,l),o="M"+d+","+g+" C"+a.x1+","+a.y1+" "+a.x2+","+a.y2+" "+h+","+c):(a=sigma.utils.getQuadraticControlPoint(d,g,h,c,e.cc),o="M"+d+","+g+" Q"+a.x+","+a.y+" "+h+","+c),t.setAttributeNS(null,"d",o),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curvedArrow={create:function(e,t,i,s){var r=e.color,a=(s("prefix")||"",s("edgeColor")),o=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(a){case"source":r=t.color||o;break;case"target":r=i.color||o;break;default:r=n}var l=document.createElementNS(s("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",s("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,i,s,r){var a,o,n=r("prefix")||"",l=i[n+"size"],d=i[n+"x"],g=i[n+"y"],h=s[n+"x"],c=s[n+"y"];return t.setAttributeNS(null,"stroke-width",e[n+"size"]||1),i.id===s.id?(a=sigma.utils.getSelfLoopControlPoints(d,g,l),o="M"+d+","+g+" C"+a.x1+","+a.y1+" "+a.x2+","+a.y2+" "+h+","+c):(a=sigma.utils.getQuadraticControlPoint(d,g,h,c,e.cc),o="M"+d+","+g+" Q"+a.x+","+a.y+" "+h+","+c),t.setAttributeNS(null,"d",o),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var i=t("prefix")||"",s=e[i+"size"],r=document.createElementNS(t("xmlns"),"text"),a="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*s,o="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",a),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",o),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],a="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;return!i("forceLabels")&&r<i("labelThreshold")||"string"!=typeof e.label?void 0:(t.setAttributeNS(null,"x",Math.round(e[s+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[s+"y"]+a/3)),t.style.display="",this)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,i,s){var r,a,o,n,l,d=(s("hoverFontStyle")||s("fontStyle"),s("prefix")||""),g=e[d+"size"],h="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*g,c="node"===s("labelHoverColor")?e.color||s("defaultNodeColor"):s("defaultLabelHoverColor"),u=document.createElementNS(s("xmlns"),"g"),m=document.createElementNS(s("xmlns"),"rect"),f=document.createElementNS(s("xmlns"),"circle"),p=document.createElementNS(s("xmlns"),"text");return u.setAttributeNS(null,"class",s("classPrefix")+"-hover"),u.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(p.innerHTML=e.label,p.textContent=e.label,p.setAttributeNS(null,"class",s("classPrefix")+"-hover-label"),p.setAttributeNS(null,"font-size",h),p.setAttributeNS(null,"font-family",s("font")),p.setAttributeNS(null,"fill",c),p.setAttributeNS(null,"x",Math.round(e[d+"x"]+g+3)),p.setAttributeNS(null,"y",Math.round(e[d+"y"]+h/3)),r=Math.round(e[d+"x"]-h/2-2),a=Math.round(e[d+"y"]-h/2-2),o=Math.round(i.measureText(e.label).width+h/2+g+9),n=Math.round(h+4),l=Math.round(h/2+2),f.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),f.setAttributeNS(null,"fill","#fff"),f.setAttributeNS(null,"cx",e[d+"x"]),f.setAttributeNS(null,"cy",e[d+"y"]),f.setAttributeNS(null,"r",l),m.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),m.setAttributeNS(null,"fill","#fff"),m.setAttributeNS(null,"x",e[d+"x"]+l/4),m.setAttributeNS(null,"y",e[d+"y"]-l),m.setAttributeNS(null,"width",o),m.setAttributeNS(null,"height",n)),u.appendChild(f),u.appendChild(m),u.appendChild(p),u.appendChild(t),u}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var s,r,a,o,n,l,d,g,h=this.graph.nodes(),c=this.graph.edges(),u=this.settings.embedObjects(i||{}),m=u("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),f=m.minX,p=m.minY,y=m.maxX,x=m.maxY,v=m.sizeMax,b=m.weightMax,E=u("width")||1,w=u("height")||1,A=u("autoRescale"),T={nodePosition:1,nodeSize:1,edgeSize:1};for(A instanceof Array||(A=["nodePosition","nodeSize","edgeSize"]),s=0,r=A.length;r>s;s++)if(!T[A[s]])throw new Error('The rescale setting "'+A[s]+'" is not recognized.');var S=~A.indexOf("nodePosition"),C=~A.indexOf("nodeSize"),P=~A.indexOf("edgeSize");for(S&&(d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),g=(u("rescaleIgnoreSize")?0:(u("maxNodeSize")||v)/d)+(u("sideMargin")||0),y+=g,f-=g,x+=g,p-=g,d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1))),u("maxNodeSize")||u("minNodeSize")?u("maxNodeSize")===u("minNodeSize")?(a=0,o=+u("maxNodeSize")):(a=(u("maxNodeSize")-u("minNodeSize"))/v,o=+u("minNodeSize")):(a=1,o=0),u("maxEdgeSize")||u("minEdgeSize")?u("maxEdgeSize")===u("minEdgeSize")?(n=0,l=+u("minEdgeSize")):(n=(u("maxEdgeSize")-u("minEdgeSize"))/b,l=+u("minEdgeSize")):(n=1,l=0),s=0,r=c.length;r>s;s++)c[s][t+"size"]=c[s][e+"size"]*(P?n:1)+(P?l:0);for(s=0,r=h.length;r>s;s++)h[s][t+"size"]=h[s][e+"size"]*(C?a:1)+(C?o:0),S?(h[s][t+"x"]=(h[s][e+"x"]-(y+f)/2)*d,h[s][t+"y"]=(h[s][e+"y"]-(x+p)/2)*d):(h[s][t+"x"]=h[s][e+"x"],h[s][t+"y"]=h[s][e+"y"])},sigma.utils.getBoundaries=function(e,t,i){var s,r,a=e.edges(),o=e.nodes(),n=-(1/0),l=-(1/0),d=1/0,g=1/0,h=-(1/0),c=-(1/0);if(i)for(s=0,r=a.length;r>s;s++)n=Math.max(a[s][t+"size"],n);for(s=0,r=o.length;r>s;s++)l=Math.max(o[s][t+"size"],l),h=Math.max(o[s][t+"x"],h),d=Math.min(o[s][t+"x"],d),c=Math.max(o[s][t+"y"],c),g=Math.min(o[s][t+"y"],g);return n=n||1,l=l||1,{weightMax:n,sizeMax:l,minX:d,minY:g,maxX:h,maxY:c}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,s,r;if(t+""!=e+""){for(r=this.graph.nodes(),i=0,s=r.length;s>i;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(r=this.graph.edges(),i=0,s=r.length;s>i;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,s,r){if(!(i instanceof sigma.classes.camera&&"object"==typeof s&&s))throw"animation.camera: Wrong arguments.";if("number"!=typeof s.x&&"number"!=typeof s.y&&"number"!=typeof s.ratio&&"number"!=typeof s.angle)throw"There must be at least one valid coordinate in the given val.";var a,o,n,l,d,g,h=r||{},c=sigma.utils.dateNow();return g={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},d=h.duration,l="function"!=typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing,a=function(){var t,r=h.duration?(sigma.utils.dateNow()-c)/h.duration:1;r>=1?(i.isAnimated=!1,i.goTo({x:s.x!==e?s.x:g.x,y:s.y!==e?s.y:g.y,ratio:s.ratio!==e?s.ratio:g.ratio,angle:s.angle!==e?s.angle:g.angle}),cancelAnimationFrame(o),delete sigma.misc.animation.running[o],"function"==typeof h.onComplete&&h.onComplete()):(t=l(r),i.isAnimated=!0,i.goTo({x:s.x!==e?g.x+(s.x-g.x)*t:g.x,y:s.y!==e?g.y+(s.y-g.y)*t:g.y,ratio:s.ratio!==e?g.ratio+(s.ratio-g.ratio)*t:g.ratio,angle:s.angle!==e?g.angle+(s.angle-g.angle)*t:g.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),n.frameId=requestAnimationFrame(a))},o=t(),n={frameId:requestAnimationFrame(a),target:i,type:"camera",options:h,fn:a},sigma.misc.animation.running[o]=n,o},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,s=0,r="string"==typeof e?e:null,a="object"==typeof e?e:null,o=sigma.misc.animation.running;for(i in o)r&&o[i].type!==r||a&&o[i].target!==a||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),s++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return s},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,s="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||s&&r[t].target!==s))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function i(e){e&&(n="x"in e.data?e.data.x:n,l="y"in e.data?e.data.y:l);var i,s,r,a,o,g,h,c,u=[],m=n+d.width/2,f=l+d.height/2,p=d.camera.cameraPosition(n,l),y=d.camera.quadtree.point(p.x,p.y);if(y.length)for(i=0,r=y.length;r>i;i++)if(a=y[i],o=a[t+"x"],g=a[t+"y"],h=a[t+"size"],!a.hidden&&m>o-h&&o+h>m&&f>g-h&&g+h>f&&Math.sqrt((m-o)*(m-o)+(f-g)*(f-g))<h){for(c=!1,s=0;s<u.length;s++)if(a.size>u[s].size){u.splice(s,0,a),c=!0;break}c||u.push(a)}return u}function s(i){function s(e,t){for(y=!1,o=0;o<e.length;o++)if(t.size>e[o].size){e.splice(o,0,t),y=!0;break}y||e.push(t)}if(!d.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&d instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(n="x"in i.data?i.data.x:n,l="y"in i.data?i.data.y:l);var a,o,g,h,c,u,m,f,p,y,x=d.settings("edgeHoverPrecision"),v={},b=[],E=n+d.width/2,w=l+d.height/2,A=d.camera.cameraPosition(n,l),T=[];if(r){var S=d.camera.quadtree.area(d.camera.getRectangle(d.width,d.height));for(h=S,a=0,g=h.length;g>a;a++)v[h[a].id]=h[a]}if(d.camera.edgequadtree!==e&&(T=d.camera.edgequadtree.point(A.x,A.y)),T.length)for(a=0,g=T.length;g>a;a++)c=T[a],m=d.graph.nodes(c.source),f=d.graph.nodes(c.target),u=c[t+"size"]||c["read_"+t+"size"],!c.hidden&&!m.hidden&&!f.hidden&&(!r||v[c.source]||v[c.target])&&sigma.utils.getDistance(m[t+"x"],m[t+"y"],E,w)>m[t+"size"]&&sigma.utils.getDistance(f[t+"x"],f[t+"y"],E,w)>f[t+"size"]&&("curve"==c.type||"curvedArrow"==c.type?m.id===f.id?(p=sigma.utils.getSelfLoopControlPoints(m[t+"x"],m[t+"y"],m[t+"size"]),sigma.utils.isPointOnBezierCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x1,p.y1,p.x2,p.y2,Math.max(u,x))&&s(b,c)):(p=sigma.utils.getQuadraticControlPoint(m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],c.cc),sigma.utils.isPointOnQuadraticCurve(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],p.x,p.y,Math.max(u,x))&&s(b,c)):sigma.utils.isPointOnSegment(E,w,m[t+"x"],m[t+"y"],f[t+"x"],f[t+"y"],Math.max(u,x))&&s(b,c));return b}function r(e){function t(e){d.settings("eventsEnabled")&&(d.dispatchEvent("click",e.data),l=i(e),g=s(e),l.length?(d.dispatchEvent("clickNode",{node:l[0],captor:e.data}),d.dispatchEvent("clickNodes",{node:l,captor:e.data})):g.length?(d.dispatchEvent("clickEdge",{edge:g[0],captor:e.data}),d.dispatchEvent("clickEdges",{edge:g,captor:e.data})):d.dispatchEvent("clickStage",{captor:e.data}))}function r(e){d.settings("eventsEnabled")&&(d.dispatchEvent("doubleClick",e.data),l=i(e),g=s(e),l.length?(d.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):g.length?(d.dispatchEvent("doubleClickEdge",{edge:g[0],captor:e.data}),d.dispatchEvent("doubleClickEdges",{edge:g,captor:e.data})):d.dispatchEvent("doubleClickStage",{captor:e.data}))}function a(e){d.settings("eventsEnabled")&&(d.dispatchEvent("rightClick",e.data),l=i(e),g=s(e),l.length?(d.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),d.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):g.length?(d.dispatchEvent("rightClickEdge",{edge:g[0],captor:e.data}),d.dispatchEvent("rightClickEdges",{edge:g,captor:e.data})):d.dispatchEvent("rightClickStage",{captor:e.data}))}function o(e){if(d.settings("eventsEnabled")){var t,i={current:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},leave:{nodes:[],edges:[]},captor:e.data},s=i.leave;for(t in h)s.nodes.push(h[t]);for(t in c)s.edges.push(c[t]);h={},c={},(s.nodes.length||s.edges.length)&&d.dispatchEvent("hovers",i)}}function n(e){if(d.settings("eventsEnabled")){l=i(e),g=s(e);var t,r,a,o,n=[],u=[],m={},f=[],p=[],y={};for(t=0;t<l.length;t++)a=l[t],m[a.id]=a,h[a.id]||(u.push(a),h[a.id]=a);for(r in h)m[r]||(n.push(h[r]),delete h[r]);for(t=0;t<g.length;t++)o=g[t],y[o.id]=o,c[o.id]||(p.push(o),c[o.id]=o);for(r in c)y[r]||(f.push(c[r]),delete c[r]);(f.length||p.length||n.length||u.length)&&d.dispatchEvent("hovers",{current:{nodes:l,edges:g},enter:{nodes:u,edges:p},leave:{nodes:n,edges:f},captor:e.data})}}var l,g,h={},c={};e.bind("click",t),e.bind("mousedown",n),e.bind("mouseup",n),e.bind("mousemove",n),e.bind("mouseout",o),e.bind("doubleclick",r),e.bind("rightclick",a)}var a,o,n,l,d=this;for(a=0,o=this.captors.length;o>a;a++)r(this.captors[a])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-hover")}}function i(e){if(o.settings("eventsEnabled")){o.dispatchEvent("click",sigma.utils.mouseCoords(e));var i=new t(e.target);i.isNode()?o.dispatchEvent("clickNode",{node:n.nodes(i.attr("data-node-id"))}):o.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function s(e){if(o.settings("eventsEnabled")){o.dispatchEvent("doubleClick",sigma.utils.mouseCoords(e));var i=new t(e.target);i.isNode()?o.dispatchEvent("doubleClickNode",{node:n.nodes(i.attr("data-node-id"))}):o.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){var i=e.toElement||e.target;if(o.settings("eventsEnabled")&&i){var s,r=new t(i),a={leave:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},captor:sigma.utils.mouseCoords(e)};r.isNode()?(s=n.nodes(r.attr("data-node-id")),a.enter.nodes=[s],l.nodes.push(s)):r.isEdge()&&(s=n.edges(r.attr("data-edge-id")),a.enter.edges=[s],l.edges.push(s)),a.current=l,o.dispatchEvent("hovers",a)}}function a(e){var i=e.fromElement||e.originalTarget;if(o.settings("eventsEnabled")){var s,r=new t(i),a={leave:{nodes:[],edges:[]},enter:{nodes:[],edges:[]},captor:sigma.utils.mouseCoords(e)};if(r.isNode())s=n.nodes(r.attr("data-node-id")),a.leave.nodes=[s],l.nodes.push(s);else{if(!r.isEdge())return;s=n.edges(r.attr("data-edge-id")),a.leave.edges=[s],l.edges.push(s)}a.current=l,o.dispatchEvent("hovers",a)}}var o=this,n=this.graph,l={nodes:[],edges:[]};e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",s),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",s),e.addEventListener("mouseover",r,!0),e.addEventListener("mouseout",a,!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(t){function i(){var i=s.contexts.hover.canvas,a=s.settings.embedObjects({prefix:t}),o=a("singleHover")?1:e,n={elements:r.nodes,renderers:sigma.canvas.hovers,type:"nodes",ctx:s.contexts.hover,end:o,graph:s.graph,settings:a};s.contexts.hover.clearRect(0,0,i.width,i.height),r.nodes.length>0&&a("enableHovering")&&sigma.renderers.canvas.applyRenderers(n),r.edges.length>0&&a("enableEdgeHovering")&&(n.renderers=sigma.canvas.edgehovers,n.elements=r.edges,n.type="edges",sigma.renderers.canvas.applyRenderers(n),a("edgeHoverExtremities")?(n.renderers=sigma.canvas.extremities,sigma.renderers.canvas.applyRenderers(n)):(n.ctx=s.contexts.nodes,n.type="nodes",n.renderers=sigma.canvas.nodes,n.elements=r.nodes,sigma.renderers.canvas.applyRenderers(n)))}var s=this,r={nodes:[],edges:[]};this.bind("hovers",function(e){r=e.data.current,i()}),this.bind("render",function(e){i()})}}.call(this),!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=r("edgeHoverSizeRatio")*(e[o+"size"]||1),l=e.count||0,d=r("edgeColor"),g=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},u=t[o+"size"],m=t[o+"x"],f=t[o+"y"],p=i[o+"x"],y=i[o+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(m,f,u,l):sigma.utils.getQuadraticControlPoint(m,f,p,y,l),!a)switch(d){case"source":a=t.color||g;break;case"target":a=i.color||g;break;default:a=h}a="edge"===r("edgeHoverColor")?e.hover_color||a:e.hover_color||r("defaultEdgeHoverColor")||a,s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(m,f),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,p,y):s.quadraticCurveTo(c.x,c.y,p,y),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var a,o,n,l,d,g,h=e.color,c=r("prefix")||"",u=r("edgeColor"),m=r("defaultNodeColor"),f=r("defaultEdgeColor"),p={},y=r("edgeHoverSizeRatio")*(e[c+"size"]||1),x=e.count||0,v=i[c+"size"],b=t[c+"x"],E=t[c+"y"],w=i[c+"x"],A=i[c+"y"];if(p=t.id===i.id?sigma.utils.getSelfLoopControlPoints(b,E,v,x):sigma.utils.getQuadraticControlPoint(b,E,w,A,x),t.id===i.id?(a=Math.sqrt(Math.pow(w-p.x1,2)+Math.pow(A-p.y1,2)),o=2.5*y,n=p.x1+(w-p.x1)*(a-o-v)/a,l=p.y1+(A-p.y1)*(a-o-v)/a,d=(w-p.x1)*o/a,g=(A-p.y1)*o/a):(a=Math.sqrt(Math.pow(w-p.x,2)+Math.pow(A-p.y,2)),o=2.5*y,n=p.x+(w-p.x)*(a-o-v)/a,l=p.y+(A-p.y)*(a-o-v)/a,d=(w-p.x)*o/a,g=(A-p.y)*o/a),!h)switch(u){case"source":h=t.color||m;break;case"target":h=i.color||m;break;default:h=f}h="edge"===r("edgeHoverColor")?e.hover_color||h:e.hover_color||r("defaultEdgeHoverColor")||h,s.strokeStyle=h,s.lineWidth=y,s.beginPath(),s.moveTo(b,E),t.id===i.id?s.bezierCurveTo(p.x2,p.y2,p.x1,p.y1,n,l):s.quadraticCurveTo(p.x,p.y,n,l),s.stroke(),s.fillStyle=h,s.beginPath(),s.moveTo(n+d,l+g),s.lineTo(n+.6*g,l-.6*d),s.lineTo(n-.6*g,l+.6*d),s.lineTo(n+d,l+g),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,s,r){var a=e.color,o=r("prefix")||"",n=e[o+"size"]||1,l=e.count||0,d=r("edgeColor"),g=r("defaultNodeColor"),h=r("defaultEdgeColor"),c={},u=t[o+"size"],m=t[o+"x"],f=t[o+"y"],p=i[o+"x"],y=i[o+"y"];if(c=t.id===i.id?sigma.utils.getSelfLoopControlPoints(m,f,u,l):sigma.utils.getQuadraticControlPoint(m,f,p,y,l),!a)switch(d){case"source":a=t.color||g;break;case"target":a=i.color||g;break;default:a=h}s.strokeStyle=a,s.lineWidth=n,s.beginPath(),s.moveTo(m,f),t.id===i.id?s.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,p,y):s.quadraticCurveTo(c.x,c.y,p,y),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,i,s,r){var a,o,n,l,d,g=e.color,h=r("prefix")||"",c=r("edgeColor"),u=r("defaultNodeColor"),m=r("defaultEdgeColor"),f={},p=e[h+"size"]||1,y=e.count||0,x=i[h+"size"],v=t[h+"x"],b=t[h+"y"],E=i[h+"x"],w=i[h+"y"],A=Math.max(2.5*p,r("minArrowSize"));if(f=t.id===i.id?sigma.utils.getSelfLoopControlPoints(v,b,x,y):sigma.utils.getQuadraticControlPoint(v,b,E,w,y),t.id===i.id?(a=Math.sqrt(Math.pow(E-f.x1,2)+Math.pow(w-f.y1,2)),o=f.x1+(E-f.x1)*(a-A-x)/a,n=f.y1+(w-f.y1)*(a-A-x)/a,l=(E-f.x1)*A/a,d=(w-f.y1)*A/a):(a=Math.sqrt(Math.pow(E-f.x,2)+Math.pow(w-f.y,2)),o=f.x+(E-f.x)*(a-A-x)/a,n=f.y+(w-f.y)*(a-A-x)/a,l=(E-f.x)*A/a,d=(w-f.y)*A/a),!g)switch(c){case"source":g=t.color||u;break;case"target":g=i.color||u;break;default:g=m}s.strokeStyle=g,s.lineWidth=p,s.beginPath(),s.moveTo(v,b),t.id===i.id?s.bezierCurveTo(f.x2,f.y2,f.x1,f.y1,o,n):s.quadraticCurveTo(f.x,f.y,o,n),s.stroke(),s.fillStyle=g,s.beginPath(),s.moveTo(o+l,n+d),s.lineTo(o+.6*d,n-.6*l),s.lineTo(o-.6*d,n+.6*l),s.lineTo(o+l,n+d),s.closePath(),s.fill()}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,i,s,r){if("string"==typeof e.label){var a=r("prefix")||"",o=e[a+"size"]||1;if(!(o<r("edgeLabelThreshold"))){var n,l,d,g=t[a+"size"],h=e.count||0,c=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],p=m-c,y=f-u,x=m>c?1:-1,v={},b=.5;t.id===i.id?(v=sigma.utils.getSelfLoopControlPoints(c,u,g,h),l=sigma.utils.getPointOnBezierCurve(b,c,u,m,f,v.x1,v.y1,v.x2,v.y2),d=Math.atan2(1,1)):(v=sigma.utils.getQuadraticControlPoint(c,u,m,f,h),l=sigma.utils.getPointOnQuadraticCurve(b,c,u,m,f,v.x,v.y),d=Math.atan2(y*x,p*x)),n="fixed"===r("edgeLabelSize")?r("defaultEdgeLabelSize"):r("defaultEdgeLabelSize")*o*Math.pow(o,-1/r("edgeLabelSizePowRatio")),s.save(),e.active?(s.font=[r("activeFontStyle"),n+"px",r("activeFont")||r("font")].join(" "),s.fillStyle="edge"===r("edgeActiveColor")?e.active_color||r("defaultEdgeActiveColor"):r("defaultEdgeLabelActiveColor")):(s.font=[r("fontStyle"),n+"px",r("font")].join(" "),s.fillStyle="edge"===r("edgeLabelColor")?e.color||r("defaultEdgeColor"):r("defaultEdgeLabelColor")),s.textAlign="center",s.textBaseline="alphabetic",s.translate(l.x,l.y),s.rotate(d),s.fillText(e.label,0,-o/2-3),s.restore()}}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils=sigma.utils||{},sigma.utils.getQuadraticControlPoint=function(e,t,i,s,r){return r=r||0,{x:(e+i)/2+(s-t)/(60/(15+r)),y:(t+s)/2+(e-i)/(60/(15+r))}},sigma.utils.getSelfLoopControlPoints=function(e,t,i,s){return s=s||0,{x1:e-7*(i+s),y1:t,x2:e,y2:t+7*(i+s)}}}.call(this);